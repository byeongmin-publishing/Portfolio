var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
var NeoVirtualKeyboard=function(a){this.userOptions=a;this.defaultOptions={inputElement:null,keyLayout:"KOREAN",keyLayoutType:"SIMPLE",offset:{top:0,left:0}};this.shiftKeyToggle=!1;this._init();this._inputBindEvent()};
NeoVirtualKeyboard.prototype={setInputElement:function(a){this._.inputElement=a;this.$inputElement=$(a)},setKeyLayout:function(a){this._.keyLayout=a},setKeyLayoutType:function(a){this._.keyLayoutType=a},_inputBindEvent:function(){var a=this;$('input[type="text"],textarea').on("click",function(){a.$inputElement=$(this)})},_init:function(){this.HANGUL={OFFSET:44032,LAST_OFFSET:55203,INDEX:{I:"\u3131\u3132\u3134\u3137\u3138\u3139\u3141\u3142\u3143\u3145\u3146\u3147\u3148\u3149\u314a\u314b\u314c\u314d\u314e".split(""),
M:"\u314f\u3150\u3151\u3152\u3153\u3154\u3155\u3156\u3157\u3158\u3159\u315a\u315b\u315c\u315d\u315e\u315f\u3160\u3161\u3162\u3163".split(""),F:" \u3131 \u3132 \u3133 \u3134 \u3135 \u3136 \u3137 \u3139 \u313a \u313b \u313c \u313d \u313e \u313f \u3140 \u3141 \u3142 \u3144 \u3145 \u3146 \u3147 \u3148 \u314a \u314b \u314c \u314d \u314e".split(" "),CC1:"\u3133\u3135\u3136\u313a\u313b\u313c\u313d\u313e\u313f\u3140\u3144".split(""),CC2:"\u3131\u3145 \u3134\u3148 \u3134\u314e \u3139\u3131 \u3139\u3141 \u3139\u3142 \u3139\u3145 \u3139\u314c \u3139\u314d \u3139\u314e \u3142\u3145".split(" "),
CV1:"\u3158\u3159\u315a\u315d\u315e\u315f\u3162".split(""),CV2:"\u3157\u314f \u3157\u3150 \u3157\u3163 \u315c\u3153 \u315c\u3154 \u315c\u3163 \u3161\u3163".split(" ")}};this.KOREAN_LAYOUT=[["\ud55c\uae00"],[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["BACKSPACE",""]],[["TAB",""],["\u3142","\u3143"],["\u3148","\u3149"],["\u3137","\u3138"],["\u3131","\u3132"],["\u3145","\u3146"],["\u315b","\u315b"],["\u3155","\u3155"],
["\u3151","\u3151"],["\u3150","\u3152"],["\u3154","\u3156"],["[","{"],["]","}"],["\\","|"]],[["TRANS","EN"],["\u3141","\u3141"],["\u3134","\u3134"],["\u3147","\u3147"],["\u3139","\u3139"],["\u314e","\u314e"],["\u3157","\u3157"],["\u3153","\u3153"],["\u314f","\u314f"],["\u3163","\u3163"],[";",":"],["'",'"'],["RETURN",""]],[["SHIFT_LEFT",""],["\u314b","\u314b"],["\u314c","\u314c"],["\u314a","\u314a"],["\u314d","\u314d"],["\u3160","\u3160"],["\u315c","\u315c"],["\u3161","\u3161"],[",","<"],[".",">"],
["/","?"],["SHIFT_RIGHT",""]],[["SPACE",""]]];this.ENGLISH_LAYOUT=[["\uc601\ubb38"],[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["BACKSPACE",""]],[["TAB",""],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["TRANS","KO"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],
["RETURN",""]],[["SHIFT_LEFT",""],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["SHIFT_RIGHT",""]],[["SPACE",""]]];this.KEYLAYOUT=[];this.KEYLAYOUT.KOREAN=this.KOREAN_LAYOUT;this.KEYLAYOUT.ENGLISH=this.ENGLISH_LAYOUT;this.neoVirtualKeyboard=[];this.neoVirtualKeyboard.MULTI='<div id="neoVirtualKeyboard" class="neoVK"><span id="selectLang"></span><button type="button" id="neoVirtualKeyboardClose" class="close"></button><ul id="neoVirtualKeyboardLayout" class="clearfix keyboard-layout"></ul></div>';
this.neoVirtualKeyboard.SIMPLE='<div id="neoVirtualKeyboard" class="neoVK"><span id="selectLang"></span><button type="button" id="neoVirtualKeyboardClose" class="close"></button><ul id="neoVirtualKeyboardLayout" class="simple clearfix keyboard-layout"></ul></div>';this._=$.extend({},this.defaultOptions,this.userOptions)},_assignElement:function(){this.$neoVirtualKeyboard=$("#neoVirtualKeyboard");this.$neoVirtualKeyboard.css(this._.offset);this.$keyboardLayout=this.$neoVirtualKeyboard.find("#neoVirtualKeyboardLayout");
this.$keyboardSelectLang=this.$neoVirtualKeyboard.find("#selectLang");this.$neoVirtualKeyboardClose=this.$neoVirtualKeyboard.find("#neoVirtualKeyboardClose");this.$neoVirtualKeyboardClose.text("KOREAN"===this._.keyLayout?"\ub2eb\uae30":"Close")},_createKeyboard:function(a){var b=this;this.$keyboardSelectLang.html(this.KEYLAYOUT[a][0]);this.$keyboardLayout.empty();$.each(this.KEYLAYOUT[a],function(a,d){0!==a&&$.each(d,function(a,c){a=c[0];var d=c[1];"MULTI"===b._.keyLayoutType?"BACKSPACE"===a?b.$keyboardLayout.append('<li><button type="button" id="backspaceKey" class="special-event"><em class="backspace-key">backspace</em></button></li>'):
"TAB"===a?b.$keyboardLayout.append('<li><button type="button" id="tabKey" class="special-event"><em class="tab-key">Tab</em></button></li>'):"TRANS"===a?b.$keyboardLayout.append('<li><button type="button" id="langConversionKey" class="special-event"><em class="lang-conversion '+("KO"===d?"ko":"en")+'">ko/en</em></button></li>'):"RETURN"===a?b.$keyboardLayout.append('<li class="absorption align-left"><button type="button" id="returnKey" class="special-event"><em class="return-key">Return</em></button></li>'):
"SHIFT_LEFT"===a?b.$keyboardLayout.append('<li class="absorption align-right"><button type="button" id="shiftLeftKey" class="special-event '+(b.shiftKeyToggle?"active":"")+'"><em class="shift-key left">Shift</em></button></li>'):"SHIFT_RIGHT"===a?b.$keyboardLayout.append('<li class="absorption"><button type="button" id="shiftRightKey" class="special-event '+(b.shiftKeyToggle?"active":"")+'"><em class="shift-key right">Shift</em></button></li>'):"SPACE"===a?b.$keyboardLayout.append('<li class="absorption all"><button type="button" id="spaceKey" class="special-event"><em class="space">Space</em></button></li>'):
(a=b.shiftKeyToggle?c[1]:c[0],d=b.shiftKeyToggle?c[0]:c[1],a===d?b.$keyboardLayout.append('<li><button type="button"><span>'+a+"</span></button></li>"):b.$keyboardLayout.append('<li><button type="button"><span>'+a+"</span><i>"+d+"</i></button></li>")):"SIMPLE"===b._.keyLayoutType&&("BACKSPACE"===a?b.$keyboardLayout.append('<li><button type="button" id="backspaceKey" class="special-event"><em class="backspace-key">backspace</em></button></li>'):"TAB"===a?b.$keyboardLayout.append('<li><button type="button" id="tabKey" class="special-event"><em class="tab-key">Tab</em></button></li>'):
"TRANS"===a?b.$keyboardLayout.append('<li><button type="button" id="langConversionKey" class="special-event"><em class="lang-conversion '+("KO"===d?"ko":"en")+'">ko/en</em></button></li>'):"RETURN"===a?b.$keyboardLayout.append('<li class="absorption align-left"><button type="button" id="returnKey" class="special-event"><em class="return-key">Return</em></button></li>'):"SHIFT_LEFT"===a?b.$keyboardLayout.append('<li class="absorption align-right"><button type="button" id="shiftLeftKey" class="special-event '+
(b.shiftKeyToggle?"active":"")+'"><em class="shift-key left">Shift</em></button></li>'):"SHIFT_RIGHT"===a?b.$keyboardLayout.append('<li class="absorption"><button type="button" id="shiftRightKey" class="special-event '+(b.shiftKeyToggle?"active":"")+'"><em class="shift-key right">Shift</em></button></li>'):"SPACE"===a?b.$keyboardLayout.append('<li class="absorption all"><button type="button" id="spaceKey" class="special-event"><em class="space">Space</em></button></li>'):(a=b.shiftKeyToggle?c[1]:
c[0],b.$keyboardLayout.append('<li><button type="button"><span>'+a+"</span></button></li>")))})})},_bindEvent:function(){var a=this;this.$neoVirtualKeyboard.draggable({handle:this.$keyboardSelectLang,stop:function(){a._.offset=$(this).offset()}});this.$neoVirtualKeyboard.disableSelection();this.$keyboardSelectLang.css("cursor","move");this.$keyboardLayout.off("click.NeoVirtualKeyboard");this.$keyboardLayout.on("click.NeoVirtualKeyboard","button",$.proxy(this._clickKeyButton,this));this.$neoVirtualKeyboardClose.on("click.NeoVirtualKeyboard",
$.proxy(this.hideKeyboard,this))},changeKeyboard:function(a){this._.keyLayout=a;this._createKeyboard(a);this._bindEvent()},hideKeyboard:function(){$("#neoVirtualKeyboard").remove()},showKeyboard:function(a,b){this._=$.extend({},this._,b);this.setInputElement(this._.inputElement);this.setKeyLayout(this._.keyLayout);this.setKeyLayoutType(this._.keyLayoutType);$("#neoVirtualKeyboard").remove();this._.offset.top||this._.offset.left||!a||(this._.offset={top:$(a).offset().top+$(a).height()+10,left:$(a).offset().left});
$("body").prepend(this.neoVirtualKeyboard[this._.keyLayoutType]);this._assignElement();this.changeKeyboard(this._.keyLayout)},_splitFinalSound:function(a){a=this.HANGUL.INDEX.CC2[this.HANGUL.INDEX.CC1.indexOf(a)];var b=[];if("undefined"===typeof a)return a;b[0]=a[0];b[1]=a[1];return b},_getComplexConsonantIndex:function(a,b){return"undefined"===typeof b?this.HANGUL.INDEX.CC1.indexOf(a):this.HANGUL.INDEX.CC2.indexOf(a+b)},_getComplexVowelIndex:function(a,b){return"undefined"===typeof b?this.HANGUL.INDEX.CV1.indexOf(a):
this.HANGUL.INDEX.CV2.indexOf(a+b)},isHangul:function(a){return this.HANGUL.OFFSET<=a&&a<=this.HANGUL.LAST_OFFSET},combineChar:function(a,b,c){return String.fromCharCode(28*(21*a+b)+c+this.HANGUL.OFFSET)},getInitialSoundIndex:function(a){a=(a.charCodeAt(0)-this.HANGUL.OFFSET)/28/21;return parseInt(a,10)},getMiddleSoundIndex:function(a){a=(a.charCodeAt(0)-this.HANGUL.OFFSET)/28%21;return parseInt(a,10)},getFinalSoundIndex:function(a){a=(a.charCodeAt(0)-this.HANGUL.OFFSET)%28;return parseInt(a,10)},
splitCharIndex:function(a){var b=[0,0,0];b[0]=this.getInitialSoundIndex(a);b[1]=this.getMiddleSoundIndex(a);b[2]=this.getFinalSoundIndex(a);return b},isConsonant:function(a){return 12593<=a&&12622>=a},isVowel:function(a){return 12623<=a&&12643>=a},_changeLayoutKey:function(a){return"shiftLeftKey"===a||"shiftRightKey"===a?(this.shiftKeyToggle=!this.shiftKeyToggle,this.changeKeyboard(this._.keyLayout),!0):"langConversionKey"===a?(a=this._.keyLayout,"KOREAN"===a?a="ENGLISH":"ENGLISH"===a&&(a="KOREAN"),
this.changeKeyboard(a),!0):!1},_clickFunctionKey:function(a,b,c){"shiftLeftKey"!==b&&"shiftRightKey"!==b&&"langConversionKey"!==b&&this.$inputElement.focus();return"tabKey"===b?(this._inputElementValue(a,"\t",c,!1),!0):"backspaceKey"===b?(this._inputElementValue(a.substring(0,a.length-1),"",c,!1),!0):"spaceKey"===b?(this._inputElementValue(a," ",c,!1),!0):"returnKey"===b?(this._inputElementValue(a,"\n",c,!1),!0):!1},_inputElementValue:function(a,b,c,d){a=d?a.substring(0,a.length-1)+b:a+b;this.$inputElement.val(a+
c);this.$inputElement.prop({selectionStart:a.length});this.$inputElement.prop({selectionEnd:a.length})},_clickKeyButton:function(a){a=$(a.currentTarget);var b=a.prop("id"),c=a.find("span").text(),d=c.charCodeAt(0);if(!this._changeLayoutKey(b)&&"undefined"!==typeof this.$inputElement.val()){var e=this.$inputElement.val();a=this.$inputElement.prop("selectionStart");var f=this.$inputElement.prop("selectionEnd");a=e.substring(0,a);e=e.substring(f,e.length);f=a.substring(a.length-1);var g=f.charCodeAt(0);
if(!this._clickFunctionKey(a,b,e)){if(this.isConsonant(g)){if(this.isVowel(d)){c=this.combineChar(this.HANGUL.INDEX.I.indexOf(f),this.HANGUL.INDEX.M.indexOf(c),0);this._inputElementValue(a,c,e,!0);return}}else if(this.isHangul(g))if(b=this.splitCharIndex(f),0===b[2]){if(this.isConsonant(d)){c=this.combineChar(b[0],b[1],this.HANGUL.INDEX.F.indexOf(c));this._inputElementValue(a,c,e,!0);return}if(this.isVowel(d)&&(d=this._getComplexVowelIndex(this.HANGUL.INDEX.M[b[1]],c),-1!==d)){c=this.HANGUL.INDEX.M.indexOf(this.HANGUL.INDEX.CV1[d]);
c=this.combineChar(b[0],c,0);this._inputElementValue(a,c,e,!0);return}}else if(this.isConsonant(d)){if(d=this._getComplexConsonantIndex(this.HANGUL.INDEX.F[b[2]],c),-1!==d){c=this.HANGUL.INDEX.F.indexOf(this.HANGUL.INDEX.CC1[d]);c=this.combineChar(b[0],b[1],c);this._inputElementValue(a,c,e,!0);return}}else if(this.isVowel(d)){f=this._splitFinalSound(this.HANGUL.INDEX.F[b[2]]);"undefined"===typeof f?(d=this.combineChar(b[0],b[1],0),c=this.combineChar(this.HANGUL.INDEX.I.indexOf(this.HANGUL.INDEX.F[b[2]]),
this.HANGUL.INDEX.M.indexOf(c),0)):(d=this.combineChar(b[0],b[1],this.HANGUL.INDEX.F.indexOf(f[0])),c=this.combineChar(this.HANGUL.INDEX.I.indexOf(f[1]),this.HANGUL.INDEX.M.indexOf(c),0));this._inputElementValue(a,d+c,e,!0);return}this._inputElementValue(a,c,e,!1)}}}};
